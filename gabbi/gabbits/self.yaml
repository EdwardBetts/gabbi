#
# Tests for testing gabbi, using the built in SimpleWsgi app.
#

tests:
- name: get simple page
  url: /

- name: bogus method
  url: /
  method: DIE
  status: 405
  response_headers:
      allow: GET, PUT, POST, DELETE, PATCH
      x-gabbi-method: DIE
      x-gabbi-url: $SCHEME://$NETLOC/

- name: query returned
  url: /somewhere?foo=1&bar=2&bar=3
  expected:
      - "\"bar\": [\"2\", \"3\"]"

- name: json query returned
  url: /somewhere?foo=1&bar=2&bar=3
  expected_json:
      bar:
          - "2"
          - "3"

- name: simple post
  url: /named/thing
  method: POST
  response_headers:
      location: $SCHEME://$NETLOC/named/thing

- name: use prior location
  url: $LOCATION
  response_headers:
      x-gabbi-url: $SCHEME://$NETLOC/named/thing

- name: google
  url: https://google.com/

- name: get ssl page
  url: /
  ssl: True
